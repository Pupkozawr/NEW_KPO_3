# NEW_KPO_3
Как вообще нормально запустить приложение:
1. запускаем систему при помощи docker compose up --build
2. потом создаём тестовые файлы в другом окне терминала, сразу приведу пример чтобы было проще:
echo "Программирование это процесс создания компьютерных программ.  Программист пишет код на языке программирования.  Код компилируется и выполняется компьютером." > ivan_work.txt
echo "Программирование это процесс создания компьютерных программ. Программист пишет код на языке программирования. Код компилируется и выполняется компьютером." > petya_copy.txt
echo "Базы данных используются для хранения информации.  SQL это язык запросов к базам данных.  Таблицы содержат строки и столбцы с данными." > maria_unique.txt
(Если что тут суть в том, что у Пети и Вани одно и то же, а у Марии другое)

3. загружаем работы всех ребят:
curl -X POST "http://localhost:5000/api/files" -F "file=@ivan_work.txt" -F "studentId=ivan" -F "workId=lab1"
curl -X POST "http://localhost:5000/api/files" -F "file=@petya_copy.txt" -F "studentId=petya" -F "workId=lab1"
curl -X POST "http://localhost:5000/api/files" -F "file=@maria_unique.txt" -F "studentId=maria" -F "workId=lab1"

4. проверяем загрузились ли файлы: curl "http://localhost:5001/api/works/lab1/files"

5. анализируем на плагиат:
curl -X POST "http://localhost:5000/api/analyze/здесьдолженбыть_ID_файла_Пети"(Советую просто заскринить id и попросить любую ИИ написать Id чтобы долго не переписывать)
curl -X POST "http://localhost:5000/api/analyze/здесьдолженбыть_ID_файла_Марии"
curl -X POST "http://localhost:5000/api/analyze/здесьдолженбыть_ID_файла_Саши"

6. Получаем общий отчёт: curl "http://localhost:5000/api/works/lab1/reports"

Теперь краткое описание:

Всего у нас есть три микросервиса:
API Gateway	5000	Единая точка входа, перенаправляет запросы
FileStorageAPI	5001	Хранение файлов и метаданных
FileAnalysisAPI	5002	Анализ на плагиат, формирование отчётов

API Gateway: единая точка входа, маршрутизация
FileStorageAPI: загрузка файлов, хранение файлов, выдача файлов 
FileAnalysisAPI: проверка на плагиат, сравнение файлов, создание отчётов

Пользовательские сценарии:
1. загрузка файла:
Студент загружает свою работу в систему.

Клиент отправляет файл на API Gateway с указанием ID студента и ID работы.
API Gateway пересылает запрос на FileStorageAPI.
FileStorageAPI сохраняет файл, вычисляет хеш содержимого и записывает метаданные в базу.
Клиент получает ответ с ID загруженного файла.

2. анализ файла на плагиат:
Нужно проверить файл на совпадения с другими работами.

Клиент отправляет запрос на анализ файла через API Gateway.
API Gateway пересылает запрос на FileAnalysisAPI.
FileAnalysisAPI запрашивает у FileStorageAPI метаданные файла и список всех файлов этой работы.
FileAnalysisAPI сравнивает хеши файлов — если совпали, значит плагиат.
Если точного совпадения нет, сравнивает тексты алгоритмом шинглов.
Результат сохраняется в базу и возвращается клиенту.

3. получение отчётов:
Преподаватель хочет посмотреть результаты проверки.

Клиент запрашивает отчёты по работе через API Gateway.
API Gateway пересылает запрос на FileAnalysisAPI.
FileAnalysisAPI достаёт из базы все отчёты по этой работе.
Клиент получает список с результатами: кто сдал, процент совпадения, есть ли плагиат.




